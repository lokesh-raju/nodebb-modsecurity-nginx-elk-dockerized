{"version":3,"sources":["public/src/admin/manage/digest.js"],"names":["define","Digest","init","$","on","action","this","getAttribute","uid","startsWith","interval","slice","bootbox","confirm","ok","send","undefined","err","app","alertError","alertSuccess","callback","socket","emit"],"mappings":"AAAA,aAGAA,OAAO,sBAAuB,WAC7B,IAAIC,KAEJA,EAAOC,KAAO,WACbC,EAAE,SAASC,GAAG,QAAS,gBAAiB,WACvC,IAAIC,EAASC,KAAKC,aAAa,eAC/B,IAAIC,EAAMF,KAAKC,aAAa,YAE5B,GAAIF,EAAOI,WAAW,WAAY,CACjC,IAAIC,EAAWL,EAAOM,MAAM,GAC5BC,QAAQC,QAAQ,6CAA8C,SAAUC,GACvE,GAAIA,EAAI,CACPb,EAAOc,KAAKV,EAAQW,UAAW,SAAUC,GACxC,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,GAGvBC,IAAIE,aAAa,gCAAkCV,EAAW,eAI3D,CACNT,EAAOc,KAAKV,EAAQG,EAAK,SAAUS,GAClC,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,GAGvBC,IAAIE,aAAa,+CAMrBnB,EAAOc,KAAO,SAAUV,EAAQG,EAAKa,GACpCC,OAAOC,KAAK,uBACXlB,OAAQA,EACRG,IAAKA,GACHa,IAGJ,OAAOpB","file":"public/src/admin/manage/digest.js","sourcesContent":["'use strict';\n\n\ndefine('admin/manage/digest', function () {\n\tvar Digest = {};\n\n\tDigest.init = function () {\n\t\t$('table').on('click', '[data-action]', function () {\n\t\t\tvar action = this.getAttribute('data-action');\n\t\t\tvar uid = this.getAttribute('data-uid');\n\n\t\t\tif (action.startsWith('resend-')) {\n\t\t\t\tvar interval = action.slice(7);\n\t\t\t\tbootbox.confirm('[[admin/manage/digest:resend-all-confirm]]', function (ok) {\n\t\t\t\t\tif (ok) {\n\t\t\t\t\t\tDigest.send(action, undefined, function (err) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treturn app.alertError(err);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tapp.alertSuccess('[[admin/manage/digest:resent-' + interval + ']]');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tDigest.send(action, uid, function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn app.alertError(err);\n\t\t\t\t\t}\n\n\t\t\t\t\tapp.alertSuccess('[[admin/manage/digest:resent-single]]');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tDigest.send = function (action, uid, callback) {\n\t\tsocket.emit('admin.digest.resend', {\n\t\t\taction: action,\n\t\t\tuid: uid,\n\t\t}, callback);\n\t};\n\n\treturn Digest;\n});\n"]}