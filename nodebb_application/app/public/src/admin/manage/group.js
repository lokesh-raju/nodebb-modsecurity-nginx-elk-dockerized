"use strict";define("admin/manage/group",["forum/groups/memberlist","iconSelect","admin/modules/colorpicker"],function(e,a,r){var n={};n.init=function(){var n=$("#group-icon");var o=$("#change-group-user-title");var i=$("#change-group-label-color");var t=$("#change-group-text-color");var c=$("#group-label-preview");var u=$("#group-label-preview-text");var s=ajaxify.data.group.name;$("#group-selector").on("change",function(){ajaxify.go("admin/manage/groups/"+$(this).val()+window.location.hash)});e.init("admin/manage/group");o.keyup(function(){u.text(o.val())});i.keyup(function(){c.css("background",i.val()||"#000000")});t.keyup(function(){c.css("color",t.val()||"#ffffff")});$('[component="groups/members"]').on("click","[data-action]",function(){var e=$(this);var a=e.parents("[data-uid]");var r=a.find(".member-name .user-owner-icon");var n=!r.hasClass("invisible");var o=a.attr("data-uid");var i=e.attr("data-action");switch(i){case"toggleOwnership":socket.emit("groups."+(n?"rescind":"grant"),{toUid:o,groupName:s},function(e){if(e){return app.alertError(e.message)}r.toggleClass("invisible")});break;case"kick":bootbox.confirm("[[admin/manage/groups:edit.confirm-remove-user]]",function(e){if(!e){return}socket.emit("admin.groups.leave",{uid:o,groupName:s},function(e){if(e){return app.alertError(e.message)}a.slideUp().remove()})});break;default:break}});$("#group-icon, #group-icon-label").on("click",function(){a.init(n,function(){var e=n.attr("value");if(e==="fa-nbb-none"){e="hidden"}$("#group-icon-preview").attr("class","fa fa-fw "+(e||"hidden"))})});r.enable(i,function(e,a){c.css("background-color","#"+a)});r.enable(t,function(e,a){c.css("color","#"+a)});$("#save").on("click",function(){socket.emit("admin.groups.update",{groupName:s,values:{name:$("#change-group-name").val(),userTitle:o.val(),description:$("#change-group-desc").val(),icon:n.attr("value"),labelColor:i.val(),textColor:t.val(),userTitleEnabled:$("#group-userTitleEnabled").is(":checked"),private:$("#group-private").is(":checked"),hidden:$("#group-hidden").is(":checked"),disableJoinRequests:$("#group-disableJoinRequests").is(":checked"),disableLeave:$("#group-disableLeave").is(":checked")}},function(e){if(e){return app.alertError(e.message)}var a=$("#change-group-name").val();if(s!==a){ajaxify.go("admin/manage/groups/"+encodeURIComponent(a),undefined,true)}app.alertSuccess("[[admin/manage/groups:edit.save-success]]")});return false})};return n});
//# sourceMappingURL=group.js.map