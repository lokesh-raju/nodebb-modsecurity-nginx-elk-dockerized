{"version":3,"sources":["public/src/admin/manage/post-queue.js"],"names":["define","PostQueue","init","$","tooltip","on","parent","this","parents","action","attr","id","method","socket","emit","err","app","alertError","message","remove","el","addClass","textareaParent","find","removeClass","focus","textarea","preview","content","val","data","html","postData"],"mappings":"AAAA,aAGAA,OAAO,0BAA2B,WACjC,IAAIC,KAEJA,EAAUC,KAAO,WAChBC,EAAE,2BAA2BC,UAE7BD,EAAE,eAAeE,GAAG,QAAS,gBAAiB,WAC7C,IAAIC,EAASH,EAAEI,MAAMC,QAAQ,aAC7B,IAAIC,EAASN,EAAEI,MAAMG,KAAK,eAC1B,IAAIC,EAAKL,EAAOI,KAAK,WACrB,IAAIE,EAASH,IAAW,SAAW,eAAiB,eAEpDI,OAAOC,KAAKF,GAAUD,GAAIA,GAAM,SAAUI,GACzC,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,EAAIG,SAE3BZ,EAAOa,WAER,OAAO,QAGRhB,EAAE,eAAeE,GAAG,QAAS,gBAAiB,WAC7C,IAAIe,EAAKjB,EAAEI,MACXa,EAAGC,SAAS,UACZ,IAAIC,EAAiBF,EAAGd,SAASiB,KAAK,0BACtCD,EAAeE,YAAY,UAAUD,KAAK,YAAYE,UAGvDtB,EAAE,eAAeE,GAAG,OAAQ,kCAAmC,WAC9D,IAAIqB,EAAWvB,EAAEI,MACjB,IAAIoB,EAAUD,EAASpB,SAASA,SAASiB,KAAK,iBAC9C,IAAIZ,EAAKe,EAASlB,QAAQ,aAAaE,KAAK,WAE5CG,OAAOC,KAAK,2BACXH,GAAIA,EACJiB,QAASF,EAASG,OAChB,SAAUd,EAAKe,GACjB,GAAIf,EAAK,CACR,OAAOC,IAAIC,WAAWF,GAEvBY,EAAQI,KAAKD,EAAKE,SAASJ,SAC3BF,EAASpB,SAASe,SAAS,UAC3BM,EAAQH,YAAY,eAKvB,OAAOvB","file":"public/src/admin/manage/post-queue.js","sourcesContent":["'use strict';\n\n\ndefine('admin/manage/post-queue', function () {\n\tvar PostQueue = {};\n\n\tPostQueue.init = function () {\n\t\t$('[data-toggle=\"tooltip\"]').tooltip();\n\n\t\t$('.posts-list').on('click', '[data-action]', function () {\n\t\t\tvar parent = $(this).parents('[data-id]');\n\t\t\tvar action = $(this).attr('data-action');\n\t\t\tvar id = parent.attr('data-id');\n\t\t\tvar method = action === 'accept' ? 'posts.accept' : 'posts.reject';\n\n\t\t\tsocket.emit(method, { id: id }, function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t}\n\t\t\t\tparent.remove();\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\n\t\t$('.posts-list').on('click', '.post-content', function () {\n\t\t\tvar el = $(this);\n\t\t\tel.addClass('hidden');\n\t\t\tvar textareaParent = el.parent().find('.post-content-editable');\n\t\t\ttextareaParent.removeClass('hidden').find('textarea').focus();\n\t\t});\n\n\t\t$('.posts-list').on('blur', '.post-content-editable textarea', function () {\n\t\t\tvar textarea = $(this);\n\t\t\tvar preview = textarea.parent().parent().find('.post-content');\n\t\t\tvar id = textarea.parents('[data-id]').attr('data-id');\n\n\t\t\tsocket.emit('posts.editQueuedContent', {\n\t\t\t\tid: id,\n\t\t\t\tcontent: textarea.val(),\n\t\t\t}, function (err, data) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err);\n\t\t\t\t}\n\t\t\t\tpreview.html(data.postData.content);\n\t\t\t\ttextarea.parent().addClass('hidden');\n\t\t\t\tpreview.removeClass('hidden');\n\t\t\t});\n\t\t});\n\t};\n\n\treturn PostQueue;\n});\n"]}