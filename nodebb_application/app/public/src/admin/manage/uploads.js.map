{"version":3,"sources":["public/src/admin/manage/uploads.js"],"names":["define","uploader","Uploads","init","$","on","show","title","route","config","relative_path","params","folder","ajaxify","data","currentFolder","refresh","file","this","parents","bootbox","confirm","ok","socket","emit","attr","err","app","alertError","message","remove"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,YAAa,SAAUC,GACtD,IAAIC,KAEJA,EAAQC,KAAO,WACdC,EAAE,WAAWC,GAAG,QAAS,WACxBJ,EAASK,MACRC,MAAO,uCACPC,MAAOC,OAAOC,cAAgB,yBAC9BC,QAAUC,OAAQC,QAAQC,KAAKC,gBAC7B,WACFF,QAAQG,cAIVZ,EAAE,WAAWC,GAAG,QAAS,WACxB,IAAIY,EAAOb,EAAEc,MAAMC,QAAQ,eAC3BC,QAAQC,QAAQ,0CAA2C,SAAUC,GACpE,IAAKA,EAAI,CACR,OAEDC,OAAOC,KAAK,uBAAwBP,EAAKQ,KAAK,aAAc,SAAUC,GACrE,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,EAAIG,SAE3BZ,EAAKa,gBAMT,OAAO5B","file":"public/src/admin/manage/uploads.js","sourcesContent":["'use strict';\n\n\ndefine('admin/manage/uploads', ['uploader'], function (uploader) {\n\tvar Uploads = {};\n\n\tUploads.init = function () {\n\t\t$('#upload').on('click', function () {\n\t\t\tuploader.show({\n\t\t\t\ttitle: '[[admin/manage/uploads:upload-file]]',\n\t\t\t\troute: config.relative_path + '/api/admin/upload/file',\n\t\t\t\tparams: { folder: ajaxify.data.currentFolder },\n\t\t\t}, function () {\n\t\t\t\tajaxify.refresh();\n\t\t\t});\n\t\t});\n\n\t\t$('.delete').on('click', function () {\n\t\t\tvar file = $(this).parents('[data-path]');\n\t\t\tbootbox.confirm('[[admin/manage/uploads:confirm-delete]]', function (ok) {\n\t\t\t\tif (!ok) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsocket.emit('admin.uploads.delete', file.attr('data-path'), function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t\t}\n\t\t\t\t\tfile.remove();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\n\treturn Uploads;\n});\n"]}