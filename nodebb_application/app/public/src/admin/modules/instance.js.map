{"version":3,"sources":["public/src/admin/modules/instance.js"],"names":["define","config","relative_path","instance","rebuildAndRestart","callback","app","alert","alert_id","type","title","message","$","window","one","timeout","socket","emit","restart"],"mappings":"AAAA,aAEAA,OAAO,0BAINC,OAAOC,cAAgB,8BACrB,WACF,IAAIC,KAEJA,EAASC,kBAAoB,SAAUC,GACtCC,IAAIC,OACHC,SAAU,+BACVC,KAAM,OACNC,MAAO,sDACPC,QAAS,kEAGVC,EAAEC,QAAQC,IAAI,qBAAsB,WACnCR,IAAIC,OACHC,SAAU,+BACVC,KAAM,UACNC,MAAO,sCACPC,QAAS,iDACTI,QAAS,MAGV,UAAWV,IAAa,WAAY,CACnCA,OAIFW,OAAOC,KAAK,eAAgB,WAC3BX,IAAIC,OACHC,SAAU,+BACVC,KAAM,OACNC,MAAO,2DACPC,QAAS,6BAKZR,EAASe,QAAU,SAAUb,GAC5BC,IAAIC,OACHC,SAAU,mBACVC,KAAM,OACNC,MAAO,sDACPC,QAAS,0BAGVC,EAAEC,QAAQC,IAAI,qBAAsB,WACnCR,IAAIC,OACHC,SAAU,mBACVC,KAAM,UACNC,MAAO,sCACPC,QAAS,qCACTI,QAAS,MAGV,UAAWV,IAAa,WAAY,CACnCA,OAIFW,OAAOC,KAAK,kBAGb,OAAOd","file":"public/src/admin/modules/instance.js","sourcesContent":["'use strict';\n\ndefine('admin/modules/instance', [\n\t// need to preload the compiled alert template\n\t// otherwise it can be unloaded when rebuild & restart is run\n\t// the client can't fetch the template file, resulting in an error\n\tconfig.relative_path + '/assets/templates/alert.js',\n], function () {\n\tvar instance = {};\n\n\tinstance.rebuildAndRestart = function (callback) {\n\t\tapp.alert({\n\t\t\talert_id: 'instance_rebuild_and_restart',\n\t\t\ttype: 'info',\n\t\t\ttitle: 'Rebuilding... <i class=\"fa fa-spin fa-refresh\"></i>',\n\t\t\tmessage: 'NodeBB is rebuilding front-end assets (css, javascript, etc).',\n\t\t});\n\n\t\t$(window).one('action:reconnected', function () {\n\t\t\tapp.alert({\n\t\t\t\talert_id: 'instance_rebuild_and_restart',\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: '<i class=\"fa fa-check\"></i> Success',\n\t\t\t\tmessage: 'NodeBB has rebuilt and restarted successfully.',\n\t\t\t\ttimeout: 5000,\n\t\t\t});\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\n\t\tsocket.emit('admin.reload', function () {\n\t\t\tapp.alert({\n\t\t\t\talert_id: 'instance_rebuild_and_restart',\n\t\t\t\ttype: 'info',\n\t\t\t\ttitle: 'Build Complete!... <i class=\"fa fa-spin fa-refresh\"></i>',\n\t\t\t\tmessage: 'NodeBB is restarting.',\n\t\t\t});\n\t\t});\n\t};\n\n\tinstance.restart = function (callback) {\n\t\tapp.alert({\n\t\t\talert_id: 'instance_restart',\n\t\t\ttype: 'info',\n\t\t\ttitle: 'Restarting... <i class=\"fa fa-spin fa-refresh\"></i>',\n\t\t\tmessage: 'NodeBB is restarting.',\n\t\t});\n\n\t\t$(window).one('action:reconnected', function () {\n\t\t\tapp.alert({\n\t\t\t\talert_id: 'instance_restart',\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: '<i class=\"fa fa-check\"></i> Success',\n\t\t\t\tmessage: 'NodeBB has restarted successfully.',\n\t\t\t\ttimeout: 5000,\n\t\t\t});\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\n\t\tsocket.emit('admin.restart');\n\t};\n\n\treturn instance;\n});\n"]}