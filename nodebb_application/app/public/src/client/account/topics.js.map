{"version":3,"sources":["public/src/client/account/topics.js"],"names":["define","header","infinitescroll","AccountTopics","method","template","set","init","handleInfiniteScroll","_method","_template","_set","config","usePagination","loadMore","direction","uid","ajaxify","data","theirid","after","$","attr","count","topicsPerPage","done","topics","length","onTopicsLoaded","nextStart","callback","app","parseAndTranslate","html","append","find","timeago","createUserTooltips","utils","makeNumbersHumanReadable","window","trigger"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,uBAAwB,wBAAyB,SAAUC,EAAQC,GAClG,IAAIC,KACJ,IAAIC,EACJ,IAAIC,EACJ,IAAIC,EAEJH,EAAcI,KAAO,WACpBN,EAAOM,OAEPJ,EAAcK,qBAAqB,4BAA6B,mBAGjEL,EAAcK,qBAAuB,SAAUC,EAASC,EAAWC,GAClEP,EAASK,EACTJ,EAAWK,EACXJ,EAAMK,EAEN,IAAKC,OAAOC,cAAe,CAC1BX,EAAeK,KAAKO,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAGDb,EAAeY,SAASV,GACvBE,IAAKA,EACLU,IAAKC,QAAQC,KAAKC,QAClBC,MAAOC,EAAE,0BAA0BC,KAAK,kBACxCC,MAAOX,OAAOY,eACZ,SAAUN,EAAMO,GAClB,GAAIP,EAAKQ,QAAUR,EAAKQ,OAAOC,OAAQ,CACtCC,EAAeV,EAAKQ,OAAQD,OACtB,CACNA,IAGDJ,EAAE,0BAA0BC,KAAK,iBAAkBJ,EAAKW,aAI1D,SAASD,EAAeF,EAAQI,GAC/BC,IAAIC,kBAAkB3B,EAAU,UAAYqB,OAAQA,GAAU,SAAUO,GACvEZ,EAAE,0BAA0Ba,OAAOD,GACnCA,EAAKE,KAAK,YAAYC,UACtBL,IAAIM,qBACJC,MAAMC,yBAAyBN,EAAKE,KAAK,2BACzCd,EAAEmB,QAAQC,QAAQ,wBAA0Bf,OAAQA,IACpDI,MAIF,OAAO3B","file":"public/src/client/account/topics.js","sourcesContent":["'use strict';\n\n\ndefine('forum/account/topics', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\n\tvar AccountTopics = {};\n\tvar method;\n\tvar template;\n\tvar set;\n\n\tAccountTopics.init = function () {\n\t\theader.init();\n\n\t\tAccountTopics.handleInfiniteScroll('topics.loadMoreUserTopics', 'account/topics');\n\t};\n\n\tAccountTopics.handleInfiniteScroll = function (_method, _template, _set) {\n\t\tmethod = _method;\n\t\ttemplate = _template;\n\t\tset = _set;\n\n\t\tif (!config.usePagination) {\n\t\t\tinfinitescroll.init(loadMore);\n\t\t}\n\t};\n\n\tfunction loadMore(direction) {\n\t\tif (direction < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tinfinitescroll.loadMore(method, {\n\t\t\tset: set,\n\t\t\tuid: ajaxify.data.theirid,\n\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\n\t\t\tcount: config.topicsPerPage,\n\t\t}, function (data, done) {\n\t\t\tif (data.topics && data.topics.length) {\n\t\t\t\tonTopicsLoaded(data.topics, done);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\n\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\n\t\t});\n\t}\n\n\tfunction onTopicsLoaded(topics, callback) {\n\t\tapp.parseAndTranslate(template, 'topics', { topics: topics }, function (html) {\n\t\t\t$('[component=\"category\"]').append(html);\n\t\t\thtml.find('.timeago').timeago();\n\t\t\tapp.createUserTooltips();\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\n\t\t\t$(window).trigger('action:topics.loaded', { topics: topics });\n\t\t\tcallback();\n\t\t});\n\t}\n\n\treturn AccountTopics;\n});\n"]}