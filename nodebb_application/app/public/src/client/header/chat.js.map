{"version":3,"sources":["public/src/client/header/chat.js"],"names":["define","components","chat","prepareDOM","chatsToggleEl","get","chatsListEl","on","parent","hasClass","requireAndCall","parents","socket","removeListener","onChatMessageReceived","onUserStatusChange","onRoomRename","data","method","param","require"],"mappings":"AAAA,aAEAA,OAAO,qBAAsB,cAAe,SAAUC,GACrD,IAAIC,KAEJA,EAAKC,WAAa,WACjB,IAAIC,EAAgBH,EAAWI,IAAI,iBACnC,IAAIC,EAAcL,EAAWI,IAAI,aAEjCD,EAAcG,GAAG,QAAS,WACzB,GAAIH,EAAcI,SAASC,SAAS,QAAS,CAC5C,OAEDC,EAAe,oBAAqBJ,KAGrC,GAAIF,EAAcO,QAAQ,aAAaF,SAAS,QAAS,CACxDC,EAAe,oBAAqBJ,GAGrCM,OAAOC,eAAe,sBAAuBC,GAC7CF,OAAOL,GAAG,sBAAuBO,GAEjCF,OAAOC,eAAe,2BAA4BE,GAClDH,OAAOL,GAAG,2BAA4BQ,GAEtCH,OAAOC,eAAe,yBAA0BG,GAChDJ,OAAOL,GAAG,yBAA0BS,IAGrC,SAASF,EAAsBG,GAC9BP,EAAe,wBAAyBO,GAGzC,SAASF,EAAmBE,GAC3BP,EAAe,qBAAsBO,GAGtC,SAASD,EAAaC,GACrBP,EAAe,eAAgBO,GAGhC,SAASP,EAAeQ,EAAQC,GAC/BC,SAAS,QAAS,SAAUlB,GAC3BA,EAAKgB,GAAQC,KAIf,OAAOjB","file":"public/src/client/header/chat.js","sourcesContent":["'use strict';\n\ndefine('forum/header/chat', ['components'], function (components) {\n\tvar chat = {};\n\n\tchat.prepareDOM = function () {\n\t\tvar chatsToggleEl = components.get('chat/dropdown');\n\t\tvar chatsListEl = components.get('chat/list');\n\n\t\tchatsToggleEl.on('click', function () {\n\t\t\tif (chatsToggleEl.parent().hasClass('open')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trequireAndCall('loadChatsDropdown', chatsListEl);\n\t\t});\n\n\t\tif (chatsToggleEl.parents('.dropdown').hasClass('open')) {\n\t\t\trequireAndCall('loadChatsDropdown', chatsListEl);\n\t\t}\n\n\t\tsocket.removeListener('event:chats.receive', onChatMessageReceived);\n\t\tsocket.on('event:chats.receive', onChatMessageReceived);\n\n\t\tsocket.removeListener('event:user_status_change', onUserStatusChange);\n\t\tsocket.on('event:user_status_change', onUserStatusChange);\n\n\t\tsocket.removeListener('event:chats.roomRename', onRoomRename);\n\t\tsocket.on('event:chats.roomRename', onRoomRename);\n\t};\n\n\tfunction onChatMessageReceived(data) {\n\t\trequireAndCall('onChatMessageReceived', data);\n\t}\n\n\tfunction onUserStatusChange(data) {\n\t\trequireAndCall('onUserStatusChange', data);\n\t}\n\n\tfunction onRoomRename(data) {\n\t\trequireAndCall('onRoomRename', data);\n\t}\n\n\tfunction requireAndCall(method, param) {\n\t\trequire(['chat'], function (chat) {\n\t\t\tchat[method](param);\n\t\t});\n\t}\n\n\treturn chat;\n});\n"]}