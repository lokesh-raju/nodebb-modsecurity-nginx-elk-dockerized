{"version":3,"sources":["public/src/client/header/notifications.js"],"names":["define","components","notifications","prepareDOM","notifContainer","get","notifTrigger","children","notifList","on","e","preventDefault","hasClass","requireAndCall","parents","socket","removeListener","onNewNotification","onUpdateCount","data","method","param","require"],"mappings":"AAAA,aAEAA,OAAO,8BAA+B,cAAe,SAAUC,GAC9D,IAAIC,KAEJA,EAAcC,WAAa,WAC1B,IAAIC,EAAiBH,EAAWI,IAAI,iBACpC,IAAIC,EAAeF,EAAeG,SAAS,KAC3C,IAAIC,EAAYP,EAAWI,IAAI,sBAE/BC,EAAaG,GAAG,QAAS,SAAUC,GAClCA,EAAEC,iBACF,GAAIP,EAAeQ,SAAS,QAAS,CACpC,OAGDC,EAAe,oBAAqBL,KAGrC,GAAIF,EAAaQ,QAAQ,aAAaF,SAAS,QAAS,CACvDC,EAAe,oBAAqBL,GAGrCO,OAAOC,eAAe,yBAA0BC,GAChDF,OAAON,GAAG,yBAA0BQ,GAEpCF,OAAOC,eAAe,kCAAmCE,GACzDH,OAAON,GAAG,kCAAmCS,IAG9C,SAASD,EAAkBE,GAC1BN,EAAe,oBAAqBM,GAGrC,SAASD,EAAcC,GACtBN,EAAe,mBAAoBM,GAGpC,SAASN,EAAeO,EAAQC,GAC/BC,SAAS,iBAAkB,SAAUpB,GACpCA,EAAckB,GAAQC,KAIxB,OAAOnB","file":"public/src/client/header/notifications.js","sourcesContent":["'use strict';\n\ndefine('forum/header/notifications', ['components'], function (components) {\n\tvar notifications = {};\n\n\tnotifications.prepareDOM = function () {\n\t\tvar notifContainer = components.get('notifications');\n\t\tvar notifTrigger = notifContainer.children('a');\n\t\tvar notifList = components.get('notifications/list');\n\n\t\tnotifTrigger.on('click', function (e) {\n\t\t\te.preventDefault();\n\t\t\tif (notifContainer.hasClass('open')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trequireAndCall('loadNotifications', notifList);\n\t\t});\n\n\t\tif (notifTrigger.parents('.dropdown').hasClass('open')) {\n\t\t\trequireAndCall('loadNotifications', notifList);\n\t\t}\n\n\t\tsocket.removeListener('event:new_notification', onNewNotification);\n\t\tsocket.on('event:new_notification', onNewNotification);\n\n\t\tsocket.removeListener('event:notifications.updateCount', onUpdateCount);\n\t\tsocket.on('event:notifications.updateCount', onUpdateCount);\n\t};\n\n\tfunction onNewNotification(data) {\n\t\trequireAndCall('onNewNotification', data);\n\t}\n\n\tfunction onUpdateCount(data) {\n\t\trequireAndCall('updateNotifCount', data);\n\t}\n\n\tfunction requireAndCall(method, param) {\n\t\trequire(['notifications'], function (notifications) {\n\t\t\tnotifications[method](param);\n\t\t});\n\t}\n\n\treturn notifications;\n});\n"]}