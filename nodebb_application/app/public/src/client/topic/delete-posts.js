"use strict";define("forum/topic/delete-posts",["components","postSelect"],function(t,i){var e={};var n;var a;var o;var d;e.init=function(){d=ajaxify.data.tid;$(window).off("action:ajaxify.end",s).on("action:ajaxify.end",s);if(n){return}app.parseAndTranslate("partials/delete_posts_modal",{},function(t){n=t;$("body").append(n);a=n.find("#delete_posts_confirm");o=n.find("#purge_posts_confirm");n.find(".close,#delete_posts_cancel").on("click",l);i.init(function(){c();f()});f();a.on("click",function(){r(a,"posts.deletePosts")});o.on("click",function(){r(o,"posts.purgePosts")})})};function s(){if(ajaxify.data.template.name!=="topic"||ajaxify.data.tid!==d){l();$(window).off("action:ajaxify.end",s)}}function r(t,e){t.attr("disabled",true);socket.emit(e,{tid:ajaxify.data.tid,pids:i.pids},function(i){t.removeAttr("disabled");if(i){return app.alertError(i.message)}l()})}function f(){if(i.pids.length){n.find("#pids").translateHtml("[[topic:fork_pid_count, "+i.pids.length+"]]")}else{n.find("#pids").translateHtml("[[topic:fork_no_pids]]")}}function c(){if(i.pids.length){a.removeAttr("disabled");o.removeAttr("disabled")}else{a.attr("disabled",true);o.attr("disabled",true)}}function l(){if(n){n.remove();n=null;i.disable()}}return e});
//# sourceMappingURL=delete-posts.js.map