{"version":3,"sources":["public/src/modules/accounts/delete.js"],"names":["define","Delete","account","uid","callback","executeAction","content","purge","confirmText","action","successText","bootbox","confirm","socket","emit","err","app","alertError","message","alertSuccess","history","back"],"mappings":"AAAA,aAEAA,OAAO,qBAAuB,WAC7B,IAAIC,KAEJA,EAAOC,QAAU,SAAUC,EAAKC,GAC/BC,EACCF,EACA,uCACA,yBACA,2BACAC,IAIFH,EAAOK,QAAU,SAAUH,EAAKC,GAC/BC,EACCF,EACA,0CACA,gCACA,mCACAC,IAIFH,EAAOM,MAAQ,SAAUJ,EAAKC,GAC7BC,EACCF,EACA,8BACA,mCACA,2BACAC,IAIF,SAASC,EAAcF,EAAKK,EAAaC,EAAQC,EAAaN,GAC7DO,QAAQC,QAAQJ,EAAa,SAAUI,GACtC,IAAKA,EAAS,CACb,OAGDC,OAAOC,KAAKL,GAASN,GAAM,SAAUY,GACpC,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,EAAIG,SAE3BF,IAAIG,aAAaT,GAEjB,UAAWN,IAAa,WAAY,CACnC,OAAOA,IAGRgB,QAAQC,WAKX,OAAOpB","file":"public/src/modules/accounts/delete.js","sourcesContent":["'use strict';\n\ndefine('accounts/delete', [], function () {\n\tvar Delete = {};\n\n\tDelete.account = function (uid, callback) {\n\t\texecuteAction(\n\t\t\tuid,\n\t\t\t'[[user:delete_this_account_confirm]]',\n\t\t\t'admin.user.deleteUsers',\n\t\t\t'[[user:account-deleted]]',\n\t\t\tcallback\n\t\t);\n\t};\n\n\tDelete.content = function (uid, callback) {\n\t\texecuteAction(\n\t\t\tuid,\n\t\t\t'[[user:delete_account_content_confirm]]',\n\t\t\t'admin.user.deleteUsersContent',\n\t\t\t'[[user:account-content-deleted]]',\n\t\t\tcallback\n\t\t);\n\t};\n\n\tDelete.purge = function (uid, callback) {\n\t\texecuteAction(\n\t\t\tuid,\n\t\t\t'[[user:delete_all_confirm]]',\n\t\t\t'admin.user.deleteUsersAndContent',\n\t\t\t'[[user:account-deleted]]',\n\t\t\tcallback\n\t\t);\n\t};\n\n\tfunction executeAction(uid, confirmText, action, successText, callback) {\n\t\tbootbox.confirm(confirmText, function (confirm) {\n\t\t\tif (!confirm) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsocket.emit(action, [uid], function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t}\n\t\t\t\tapp.alertSuccess(successText);\n\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\treturn callback();\n\t\t\t\t}\n\n\t\t\t\thistory.back();\n\t\t\t});\n\t\t});\n\t}\n\n\treturn Delete;\n});\n"]}