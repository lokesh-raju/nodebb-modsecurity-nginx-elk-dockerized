"use strict";define("settings/sorted-list",["benchpress","jqueryui"],function(t){var a;var e;a={types:["sorted-list"],use:function(){e=this},set:function(t,a){var r=t.attr("data-sorted-list");a[r]=[];t.find('[data-type="item"]').each(function(t,i){var d=$(i).attr("data-sorted-list-uuid");var s=$('[data-sorted-list-object="'+r+'"][data-sorted-list-uuid="'+d+'"]');a[r].push(e.helper.serializeForm(s))})},get:function(a){var r=a.find('[data-type="list"]');var i=a.attr("data-sorted-list");var s=a.attr("data-form-template");t.parse(s,{},function(t){var r=$('[data-sorted-list="'+i+'"] [data-type="add"]');r.on("click",function(){var r=bootbox.confirm(t,function(t){if(t){var s=utils.generateUUID();var o=$('<form class="" data-sorted-list-uuid="'+s+'" data-sorted-list-object="'+i+'"></form>');o.append(r.find("form").children());$("#content").append(o.hide());var n=e.helper.serializeForm(o);d(a,s,n)}})});var s=ajaxify.data.settings[i];if(Array.isArray(s)&&typeof s[0]!=="string"){s.forEach(function(e){var r=utils.generateUUID();var s=$(t).deserialize(e);s.attr("data-sorted-list-uuid",r);s.attr("data-sorted-list-object",i);$("#content").append(s.hide());d(a,r,e)})}});r.sortable().addClass("pointer")}};function r(t,a){var e=t.attr("data-sorted-list");var r=$('[data-sorted-list="'+e+'"] [data-type="remove"]');r.on("click",function(){$('[data-sorted-list-uuid="'+a+'"]').remove()})}function i(a,d){var s=a.find('[data-type="list"]');var o=a.attr("data-sorted-list");var n=a.attr("data-item-template");var l=$('[data-sorted-list-uuid="'+d+'"] [data-type="edit"]');l.on("click",function(){var l=$('[data-sorted-list-uuid="'+d+'"][data-sorted-list-object="'+o+'"]').clone(true).show();var u=bootbox.confirm(l,function(l){if(l){var c=$('<form class="" data-sorted-list-uuid="'+d+'" data-sorted-list-object="'+o+'"></form>');c.append(u.find("form").children());$("#content").find('[data-sorted-list-uuid="'+d+'"][data-sorted-list-object="'+o+'"]').remove();$("#content").append(c.hide());var f=e.helper.serializeForm(c);t.parse(n,f,function(t){t=$(t);var e=s.find('[data-sorted-list-uuid="'+d+'"]');e.after(t);e.remove();t.attr("data-sorted-list-uuid",d);r(a,d);i(a,d)})}})})}function d(a,e,d){var s=a.find('[data-type="list"]');var o=a.attr("data-item-template");t.parse(o,d,function(t){t=$(t);s.append(t);t.attr("data-sorted-list-uuid",e);r(a,e);i(a,e)})}return a});
//# sourceMappingURL=sorted-list.js.map